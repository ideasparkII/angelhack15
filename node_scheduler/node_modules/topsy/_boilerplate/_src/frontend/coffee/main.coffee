console.log "{ {{ project }} }"

_{{ App }} = {}

require.config
  paths:
    jquery: 'vendor/zepto'
    underscore: 'vendor/lodash.underscore'
    backbone: 'vendor/backbone'
    jade: 'vendor/jade'
    mixen: 'vendor/mixen'
    react: 'vendor/react'
    q: 'vendor/q'
    queryparams: 'vendor/backbone.queryparams'
    devTools: 'lib/devTools'
    eventBus: 'lib/eventBus'
    backboneQ: 'lib/backboneQ'
  shim:
    app:
      deps: ['backbone']
    backbone:
      deps: ['underscore','jquery']
    prism:
      exports: 'Prism'
    queryparams:
      deps: ['backbone']

require [
  'q', 'app', 'backbone'
  'backboneQ', 'devTools', 'queryparams'
], (Q, App, Backbone) ->

  # Expose Q
  window?.Q = Q

  # Assign Backbone's $
  Backbone.$ = $

  $ ->
    (new App).start()
    $('body').removeClass('loading')

