
###
Error Handler
###

errorHandler = require('errorhandler')

module.exports = (app) ->

  ## Catch 404
  app.use (req, res, next) ->
    err = new Error('Not Found')
    err.status = 404
    next(err)

  ## Error Handlers (Development)
  if app.get('env') is 'development'
    app.use(errorHandler())

  ## Error Handlers (Production)
  app.use (err, req, res, next) ->
    res.status(err.status or 500)
    res.render 'error',
      message: err.message,
      error: {}
