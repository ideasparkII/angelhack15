
###
Gulper
###

Q        = require('q')
{ exec } = require('child_process')

module.exports = (dir, task, callback) ->

  deferred = Q.defer()

  cmd = "./node_modules/gulp/bin/gulp.js #{task}"

  exec cmd, cwd: dir, (err, stdout, stderr) ->
    deferred.reject(new Error(err)) if err
    deferred.resolve(installer: true)
    do callback if callback

  deferred.promise
